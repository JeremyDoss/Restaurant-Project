{% extends "base.html" %}

{% block style %}

<script>
	window.onload = function() {
		var images = [];

		//Flag Image
		images.push('http://i.imgur.com/mcb1csP.jpg');
		images.push('http://i.imgur.com/mcb1csP.jpg');
		//Mushroom
		images.push('http://i.imgur.com/TmMNnWn.jpg');
		images.push('http://i.imgur.com/TmMNnWn.jpg');
		//Mozarella
		images.push('http://i.imgur.com/whoPLH5.png');
		images.push('http://i.imgur.com/whoPLH5.png');
		//Moustache
		images.push('http://i.imgur.com/muPba4t.jpg');
		images.push('http://i.imgur.com/muPba4t.jpg');
		//Pizzacat
		images.push('http://i.imgur.com/oxDSrxU.gif');
		images.push('http://i.imgur.com/oxDSrxU.gif');
		//Pizzaslice
		images.push('http://i.imgur.com/JxgMEXj.jpg');
		images.push('http://i.imgur.com/JxgMEXj.jpg');
		//Spaghetti
		images.push('http://i.imgur.com/ABT6qht.jpg');
		images.push('http://i.imgur.com/ABT6qht.jpg');
		//Sundae
		images.push('http://i.imgur.com/E7TtAYA.jpg');
		images.push('http://i.imgur.com/E7TtAYA.jpg');

		//Randomize images every time.
		Array.prototype.rando = function() {
			var i = this.length;
			var pick, temp;

			while (--i) {
				pick = Math.floor(Math.random() * (i - 1));
				temp = this[i];
				this[i] = this[pick];
				this[pick] = temp;
			}
		};
		images.rando();

		//Build HTML list of images and hide them.
		var htmlLine = "<ol>";
		for (var i = 0; i < 16; i++) {
		  htmlLine += "<li>";
		  htmlLine += "<img src = '" + images[i] + "'/>";
		  htmlLine += "</li>";
		}
		htmlLine += "</ol>";
		document.getElementById("match").innerHTML = htmlLine;
		$("img").hide();

		var first = "";
		var second = "";
		var count = 0;
		var correct = 0;

		$("li").click(function() {
		  if ((count < 2) &&  ($(this).children("img").hasClass("face-up")) === false) {
				count++;
				$(this).children("img").show();
				$(this).children("img").addClass("face-up");

				if (count === 1) {
			  	first = $(this).children("img").attr("src");
				}
				else {
					second = $(this).children("img").attr("src");

					//If you guess correctly...
					if (first === second) {
						$("li").children("img[src='" + second + "']").addClass("match");
						//Increment correct count.
						correct++;
						//If all matches are found...
						if (correct === 8) {
							var r = Math.floor(Math.random() * (6 - 1) + 1);
							$("#match").hide();
							$("img").hide();
							$("img").removeClass("match");
							$("img").not(".match").removeClass("face-up");
							if (r === 1) {
								$("#win").show();
							}
							else {
								$("#lose").show();
							}
							correct = 0;
						}
					}

					//If you don't guess correctly...
					else {
						setTimeout(function() {
							$("img").not(".match").hide();
							$("img").not(".match").removeClass("face-up");
						}, 500);
					}

					count = 0;
					setTimeout(function() { console.clear(); }, 60000);
				}
		  }
		});
	}


$(function() {
	$(".game").button().click(function(event) {
		$(".options").toggle();
		$(".play").hide();
		$("#match").hide();
		$("#tic").hide();
		$("#win").hide();
		$("#lose").hide();
	});

	$(".tictac").button().click(function(event) {
		$(".options").hide();
		$(".play").show();

	});

	$(".matching").button().click(function(event) {
		$(".options").hide();
		$(".play").show();
		$("#match").show();
	});

	$("#win").button().click(function(event) {
		$(".options").hide();
		$("#win").hide();
		$(".play").hide();
	});

	$("#lose").button().click(function(event) {
		$(".options").hide();
		$("#lose").hide();
		$(".play").hide();
	});

	$(".refill").button().click(function(event) {

		$.post("/standby/refill/", {tableID: 1}, function(data) {
			alert("Refill request sent!")
			location.reload()
		})
	});

	$(".help").button().click(function(event) {
		$.post("/standby/help/", {tableID: 1}, function(data) {
			alert("Help request sent!")
			location.reload()
		})
	});
});
</script>

<style>
body {
	background-image: url("http://i.imgur.com/ucjverw.jpg");
	background-size: cover;
	background-color: black;
}

#win {
	display: none;
	width: 800px;
	margin: auto auto;
	padding-top: 150px;
	text-align: center;
	color: #ff0000;
}

#lose {
	display: none;
	width: 800px;
	margin: auto auto;
	padding-top: 150px;
	text-align: center;
	color: #ff0000;
}

#tic {
	display: none;
	margin: auto;
	width: 800px;
}

#match {
	display: none;
	margin: auto;
	width: 800px;
}

ul {
	padding: 0;
	margin: 0;
}

li {
	background-image: url("http://i.imgur.com/l11LCqi.gif");
	background-size: 150px 150px;
	padding: 0;
	float: left;
	margin: 10px;
	list-style: none;
	outline: solid;
	width: 150px;
	height: 150px;
}

img {
	width: 100%;
	height: 100%;
}

.game {
	background:linear-gradient(to bottom, #fa3e0f 5%, #000000 100%);
	background-color:#fa3e0f;
	border-radius:15px;
	display:inline-block;
	position: absolute;
	width: 180px;
	left: 15px;
	padding: 32px 32px;
	text-align:center;
	cursor:pointer;
	color:#ffffff;
	font-family:arial;
	font-size:21px;
	font-weight:bold;
	text-decoration:none;
}

.pay {
	background:linear-gradient(to bottom, #fa3e0f 5%, #000000 100%);
	background-color:#fa3e0f;
	border-radius:15px;
	display:inline-block;
	position: absolute;
	width: 180px;
	right: 15px;
	padding: 32px 32px;
	text-align:center;
	cursor:pointer;
	color:#ffffff;
	font-family:arial;
	font-size:21px;
	font-weight:bold;
	text-decoration:none;
}

.tictac {
	background-image: url("http://i.imgur.com/6YP3yUP.png");
	background-size: cover;
	display: inline-block;
	float: left;
	color: #ffffff;
	width: 250px;
	height: 250px;
	margin: auto auto;
}

.matching {
	background-image: url("http://i.imgur.com/R5FGe1K.png");
	background-size: cover;
	display: inline-block;
	float: right;
	color: #ffffff;
	width: 250px;
	height: 250px;
}

.options {
	display: none;
	width: 700px;
	margin: auto auto;
	padding-top: 150px;
}

.refill {
	background-color:#2bd95a;
	border-radius:42px;
	position: absolute;
	width: 180px;
	text-align:center;
	left: 15px;
	bottom: 15px;
	cursor:pointer;
	color:#000000;
	font-family:Verdana;
	font-size:16px;
	font-weight:bold;
	padding:32px 32px;
	text-decoration:none;
}
.refill:active {
	bottom: 10px;
}

.help {
	background-color:#e32d2d;
	border-radius:42px;
	position: absolute;
	width: 180px;
	text-align:center;
	right: 15px;
	bottom: 15px;
	cursor:pointer;
	color:#000000;
	font-family:Verdana;
	font-size:16px;
	font-weight:bold;
	padding:32px 32px;
	text-decoration:none;
}
.help:active {
	bottom: 10px;
}

.play {
	display: none;
}
</style>

{% endblock %}

{% block main %}

<!-- STANDBY PAGE -->
<div class="standby">
	<div class="game">Play a Game?</div>
	<div class="pay">Pay Bill</div>
	<div class="refill">Refill Request</div>
	<div class="help">Request Assistance</div>
	<div class="options">
		<div class="tictac" alt="Play Tic-Tac-Toe" title="Play Tic-Tac-Toe"></div>
		<div class="matching" alt="Play Matching" title="Play Matching"></div>
	</div>
	<div class="play">
		<div id="tic"></div>
		<div id="match"></div>
		<div id="win"><h1>You are a winner!!!</h1><h5>A free gift was added!</h5></div>
		<div id="lose"><h1>You didn't win this time :(</h1><h5>Keep trying!!</h5></div>
	</div>
</div>

{% endblock %}
