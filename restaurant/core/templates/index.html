{% extends "base.html" %}

{% block script %}


<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.16.1/TweenLite.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.16.1/utils/Draggable.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.16.1/plugins/CSSPlugin.min.js"></script>
<!--Wheel.js-->
<script src="https://dl.dropboxusercontent.com/u/63798944/wheel.js"></script>
<link rel="stylesheet" href="https://dl.dropboxusercontent.com/u/162610/menuStyle.css">
<!--Wheel CSS -->
<link rel="stylesheet" href="https://dl.dropboxusercontent.com/u/63798944/wheel.css">



<script>
  function update_total() {
  	var elem = $('div.order')
  	if (elem.children(".subtotal").length == 0) {
  		elem.append("<div class='subtotal'>beep</div>")
  	}
  	else {
  		elem.children(".subtotal").text("boop")
  	}
  }
// Sry I know not the best way to do it, but time is of the essence
  $(function() {
      // Show appitizer menu
      $( ".b1" ).button().click(function(event) {
          $( ".Appetizers" ).show();
          $( ".Entrees" ).hide();
          $( ".Drinks" ).hide();
          $( ".Desserts" ).hide();
          $( ".startPane" ).hide();
      });
      // Show entrees menu
      $( ".b2" ).button().click(function(event) {
          $( ".Appetizers" ).hide();
          $( ".Entrees" ).show();
          $( ".Drinks" ).hide();
          $( ".Desserts" ).hide();
          $( ".startPane" ).hide();
      });
      // Show drink menu
      $( ".b4" ).button().click(function(event) {
          $( ".Appetizers" ).hide();
          $( ".Entrees" ).hide();
          $( ".Drinks" ).show();
          $( ".Desserts" ).hide();
          $( ".startPane" ).hide();
      });
      // Show desert menu
      $( ".b3").button().click(function(event) {
          $( ".Appetizers" ).hide();
          $( ".Entrees" ).hide();
          $( ".Drinks" ).hide();
          $( ".Desserts" ).show();
          $( ".startPane" ).hide();
      });


    $( "input[type=submit], a, button" )
      .button()
      .click(function( event ) {
        var buttonText = $(this).text();
        if (buttonText == "Info") {
          var itemInfo = $(this).parents('h5').children('.itemInfo').text();
          var itemID = $(this).parents('h5').children('.itemInfo').attr("name");
          console.log(itemID);
          $( ".popup" ).show();

        }
        if (buttonText == "Add") {
          // stuff for adding to the sidebar
          var itemInfo = $(this).parents('h5').children('.itemInfo').text();
          var split = itemInfo.split(":");
          var item = $.trim(split[0])
          var price = $.trim(split[1])


          $('div.order').append('<h4>'+item+'<span style="float:right">'+price+'</span></h4>  ')
          update_total()
        }
        event.preventDefault();
      });




  });
  </script>

{% endblock %}
{% block style %}
{% endblock %}
{% block main %}

<body>


  







  <br />
  <!-- CUSTOMER MENU CONTAINER  -->
  <div id="container" class="dropWindow">
    <div class="titlebar">
      <br />
      <h1 class="title">Welcome to the Pizza Zone!</h1>
      <br />
    </div>
    <!-- MENU SELECT  -->
    <div class="section">
      <div class="price"> 
        <h2> Menu </h2> 
      </div>
      <div class="infos">
      {% for category in categories %}
        {% if category.parent == None %}
        <h3 class="b{{counter.increment_and_return}}">{{ category.name}}</h3>
        {% endif %}
       {% endfor %}
      </div>
    </div>

    {% for category in categories %}
    {% if category.parent == None %}
   	<div class="{{ category.name}}">
   		<div class="section2">
   			<h2>{{category.name}}</h2>
   			{% for each in all_menu_items %}
   				{% if each.category.name == category.name %}
            <h5><span name="{{ each.id  }}" class="itemInfo">{{ each.name }}  : {{ each.price }} </span>
              <right>  <span style="float: right"><button>Info</button><button>Add</button></span></h5></right>
            <h6>{{ each.description }} </h6>
   				{% endif %}
   			{% endfor %}
   		</div>
    </div>
    {% endif %}
    {% endfor %}


        <!-- START PAIN -->
    <div class="startPane">
      <div class="section2">
        <h2>Welcome!</h2>
        <center><h4>Select from the menu or drag from the wheel.</h4></center>
      </div>
    </div>



    <!-- ORDER SECTIONS  -->
    <div class="order">



    </div>







    <div class="basebar">
      <br />
      <br />
    </div>
  </div>
      <div id="wheelContainer">
      <img id="back" class="wheelTrigger wheelRotate" src="http://www.clipartbest.com/cliparts/acq/zrb/acqzrbbdi.png">
      <img id="category1" class="wheelCategory wheelRotate wheelOrigin" src="http://imgur.com/4p56Ih6.png" draggable="true">
      <img id="category2" class="wheelCategory wheelRotate wheelOrigin" src="http://imgur.com/yl6MbQH.png" draggable="true">
      <img id="category3" class="wheelCategory wheelRotate wheelOrigin" src="http://imgur.com/puCtLbf.png" draggable="true wheelOrigin">
      <img id="category4" class="wheelCategory wheelRotate wheelOrigin" src="http://imgur.com/iS0kDi1.png" draggable="true">
    </div>


<div id = "popup" style="z-index:902;">
    <div style="position: fixed; z-index:903; width: 100%; height: 100%; left: 0; top: 0;background:#ccc; display:none;">
        Overlay
    </div>
    Contents of container 1
</div>





</body>





{% endblock %}